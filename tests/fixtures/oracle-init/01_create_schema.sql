-- CDC Test Schema and Table Creation
-- gvenzl/oracle-xe:21-slim 초기화 스크립트
-- APP_USER (cdc_user)로 실행됨

-- MY_TABLE 생성
CREATE TABLE MY_TABLE (
    ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(100),
    VALUE NUMBER(10,2),
    UPDATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL
);

-- UPDATED_AT 컬럼에 인덱스 생성 (CDC 성능 최적화)
CREATE INDEX IDX_MY_TABLE_UPDATED_AT ON MY_TABLE(UPDATED_AT);

-- 테스트 데이터 삽입
INSERT INTO MY_TABLE (ID, NAME, VALUE, UPDATED_AT)
VALUES (1, 'Record 1', 100.00, CURRENT_TIMESTAMP - INTERVAL '10' MINUTE);

INSERT INTO MY_TABLE (ID, NAME, VALUE, UPDATED_AT)
VALUES (2, 'Record 2', 200.00, CURRENT_TIMESTAMP - INTERVAL '5' MINUTE);

INSERT INTO MY_TABLE (ID, NAME, VALUE, UPDATED_AT)
VALUES (3, 'Record 3', 300.00, CURRENT_TIMESTAMP);

COMMIT;
